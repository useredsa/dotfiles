### Make sxhkd reload its configuration files:
super + F5
	pkill -USR1 -x sxhkd



### Application Shortcuts
### ==========================

## Tiled applications
## ------------------

# Run menu
super + p
	rofi -show run -monitor -5

# Open a terminal
super + Return
	kitty

# Open the file browser
super + e
	dolphin

# Open the audio manager
super + v
	mate-volume-control -p output

## At-hand applications (scratchpad-workspace like)
## ------------------------------------------------

# Telegram
super + m; t
	bspc-toggle-visibility.sh TelegramDesktop telegram-desktop --state fullscreen

# Discord
super + m; d
	bspc-toggle-visibility.sh discord --state fullscreen

# Spotify
super + m; s
	bspc-toggle-visibility.sh spotify --state fullscreen --unnamed-rule

# Terminal
super + space
	export ALTPS1='[\d \t \W]\$ ' ; bspc-toggle-visibility.sh ScratchTerm --state floating --instancename "alacritty --class ScratchTerm,Alacritty"



### Bspwm Settings
### ==============

## General
## -------

# Quit/Restart bspwm
super + shift + {q,r}
	bspc {quit,wm -r}

## Function Menus
## --------------

# Help Menu
super + {F1,question}
	awk '/^[a-z]/ && last \{print "<small>",$0,"\t",last,"</small>"\} \{last=""\} /^#/\{last=$0\}' \
	/home/useredsa/.config/sxhkd/sxhkdrc |                                       \
	column -t -s $'\t' |                                                         \
	rofi -dmenu -p help -i -markup-rows -monitor -5 -lines 5 -columns 1 | \
	grep -oE -e 'super[^#]*' | tr -d ' ' | tr ';' ' ' | xargs xdotool key

# Desktops menu
super + F2
	bspc desktop $(bspc query --desktops --names | rofi -dmenu -monitor -5) --focus


# Layout Menu
super + F3
	printf "tall\nrtall\nwide\nrwide\neven\ntiled\nmonocle\n" | \
	rofi -dmenu -monitor -5 -lines 1 -columns 7 |               \
	xargs bsp-layout set

# super + F4 is close
# super + F5 is reload config

# Node flags Menu
super + F6
	bspc node --flag $(                                                          \
	printf "hidden\nsticky\nprivate\nlocked\nmarked\n" | rofi -dmenu -monitor -5 \
	)


## Nodes
## -----

# Focus/Swap with an adjacent node
super + {_,shift + }{h,j,k,l}
	bspc node --{focus,swap} {west,south,north,east}

# Close/kill window
super + {F4,shift + F4}
	bspc node {--close, -kill}

# Focus last node
super + Tab
    bspc node --focus last.local
    # rofi -show window -monitor -5 -selected-row 2                                    \
    # -kb-accept-entry '!Super-Tab,!Super+Super_L'    -kb-cancel 'Super+Escape,Escape' \
    # -kb-row-up 'Super+ISO_Left_Tab,Super+Shift+Tab' -kb-row-down 'Super+Tab'
    # https://github.com/davatorium/rofi/issues/38

# Focus the newer/older node in the history
super + {i,o}
	bspc wm -h off; bspc node {newer,older} --focus; bspc wm -h on

# Set the node state
super + {t,f,shift + t,shift + f}
	bspc node --state {\~tiled,\~fullscreen,\~pseudo_tiled,\~floating}

# Set the node flags
super + s; {h,s,p,l,m}
	bspc node --flag {hidden,sticky,private,locked,marked}


## Marking and receptacles
## -----------------------

# Cut the current node
super + x
    bspc node --flag marked=on --flag hidden=on

# Yank the current node
super + c
	bspc node --flag marked=on

# Paste the current node
super + v
 	bspc node any.marked  --flag hidden=off --to-node 'any.!automatic' --focus

# Insert a receptacle and try pasting
super + ctrl + {h,j,k,l}
	bspc node --presel-dir {west,south,north,east}; \
 	bspc node any.marked --flag hidden=off --to-node 'any.!automatic' --focus

# Remove receptacles (cancel the preselection for the focused node)
super + ctrl + space
	bspc node --presel-dir cancel

# Swap the current node and the biggest local node
super + b
	bspc node -s biggest.local

# Unhide (the newer) hidden node
super + u
	bspc node any.local.hidden --flag hidden --focus


## Refactoring
## -----------

# Enter Refactoring Menu
Menu:
    
# Exit Refactoring Menu
Menu: Menu
    xdotool key Escape

Menu: super + {_,shift + }{h,j,k,l}
	bspc node --{focus,swap} {west,south,north,east}

# Focus a related node
Menu: {Left,Down,Up,Right}
	bspc node -f @{brother,first,parent,brother}

# Resize the bottom right corner
Menu: {h,j,k,l}
	bspc node --resize bottom_right {-20 0,0 20,0 -20,20 0}

# Resize the top left corner
Menu: shift + {h,j,k,l}
    bspc node --resize top_left {-20 0,0 20,0 -20,20 0}

# Balance nodes
Menu: b
    bspc node @/ --balance

# Rotate parent
Menu: paren{left,right}
	bspc node @parent --rotate {-90,90}

# Increment/Decrement node gaps
Menu: {minus,equal}
    bspc config window_gap $(($(bspc config window_gap) {-,+} 1))


## Desktop
## -------

# Focus last desktop
super + grave
	bspc desktop --focus; bspc desktop --focus last

# Focus the next/previous desktop
super + bracket{left,right}
	bspc wm -h off; bspc desktop -f {prev,next}; bspc wm -h on

# Focus the given desktop
super + {1-8}
	bspc desktop -f '^{1-8}'

# Send node to the last desktop
super + shift + grave
	bspc node -d last --focus

# Send node to the next/previous desktop
super + shift + bracket{left,right}
	bspc node -d {prev,next} --follow

# Send to the given desktop
super + shift + {1-8}
	bspc node -d '^{1-8}' --focus

# Cycle Desktop's Tree
super + {less,greater}
	bspc node @/ --circulate {backward,forward}

# Focus root node in the current desktop
super + a
	bspc node -f @/



### Function Keys
### ============

# Volume keys
{XF86AudioLowerVolume, XF86AudioRaiseVolume, XF86AudioMute}
	amixer sset Master {3%-,3%\+,toggle} \
	#| grep -E "[0-9]+%" | head -c -1 | xargs --null rofi -e

# PrintScreen (Screenshot)
{shift + ,_}Print
	flameshot {gui ,full -c -p ~/Pictures/}

# Adjust Screen Brightness
{XF86MonBrightnessUp, XF86MonBrightnessDown}
	xbacklight {-inc,-dec} 10

